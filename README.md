# UW Workday SOAP Generation Issue Reproduction
This repository contains some attempts to solve or workaround various issues related to code generation using dotnet-svcutil 2.0.2.

## Tooling
We've had a lot of issues using dotnet-svcutil to generate payload and exception types.
- Incorrect Type hinting on attributes leading to PlatformNotSupported exceptions.
- Incorrect Array dimensions 3D instead of 2D.

This repository currently attempts to create the contract types with `dotnet-xscgen`, and then instruct `dotnet-svcutil` to reuse those types.

## Installation

`dotnet tool install --global dotnet-xscgen --version 2.0.521`

`dotnet tool install --global dotnet-svcutil --version 2.0.2`

## UWDiff
This is a tool that rips through the `svcutil` generated Reference.cs file and removes all non-interface and non-ClientBase derived classes. It should only save the things required for the client.

## Usage
The files in the UWD.Lib project were generated by running these commands from the project's root folder.

```bash
xscgen -o UWD.Lib/ -n "|Resource_Management.xsd=UWD.Lib" --order Resource_Management.xsd

dotnet-svcutil Resource_Management.wsdl --outputDir Service --serializer XmlSerializer --projectFile UWD.Lib/UWD.Lib.csproj --namespace "*,UWD.Lib" --reference UWD.Lib/UWD.Lib.csproj

cd UWDiff

dotnet run -- -d ../UWD.Lib > ../Output.cs

cp ../Output.cs ../UWD.Lib/Service/Service.cs

cd ../WDTest

dotnet run -- -u user -p pass
```

## TODO
- Create a new project with to actually test this.
- See if it works.

## Issue Status
WCF team currently expects this type reuse issue to be fixed in v2.0.4 which is due out in 2nd quarter 2020.